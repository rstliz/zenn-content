---
title: "Golang ãƒ­ã‚®ãƒ³ã‚°"
emoji: "ğŸ™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Go"]
published: true
---

# ãƒ­ã‚°ã®æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

logãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

```go
import (
    "log"
)

func main() {
    log.Print("This is test")
}
```

å®Ÿè¡Œ
```
2021/07/27 07:39:17 This is test
```

- ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã®æŒ‡å®šã¯ãªã„
- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã”ã¨ã«å€‹åˆ¥ã®ãƒ­ã‚¬ãƒ¼ã‚’æ§‹æˆã‚’ã™ã‚‹ã“ã¨ã¯ã§ããªã„
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€Œæ—¥ä»˜ã¨æ™‚åˆ»ã€ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã«å«ã¾ã‚Œã‚‹

## ãƒ­ã‚°å‡ºåŠ›ã¨åŒæ™‚ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ çµ‚äº†

```go
log.Fatal("ãƒ­ã‚°ã‚’å‡ºåŠ›ã—ã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ çµ‚äº†ã¨ãªã‚‹")
fmt.Print("ã“ã®ãƒ­ã‚°ã¯å‡ºåŠ›ã•ã‚Œãªã„")
```

```go
log.Panic("ãƒ­ã‚°ã¨ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’å‡ºåŠ›ã—ã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ çµ‚äº†ã¨ãªã‚‹")
fmt.Print("ã“ã®ãƒ­ã‚°ã¯å‡ºåŠ›ã•ã‚Œãªã„")
```

## ãƒ­ã‚°ã®ãƒ—ãƒªãƒ•ã‚£ãƒƒã‚¯ã‚¹

```go
log.SetPrefix("method_name(): ")
log.Print("ãŸã ã®Print()")
log.Fatal("ã“ã£ã¡ã¯Fatal()")
```

å®Ÿè¡Œ
```
method_name(): 2021/07/27 08:51:33 ãŸã ã®Print()
method_name(): 2021/07/27 08:51:33 ã“ã£ã¡ã¯Fatal()
exit status 1
```

## ãƒ­ã‚°ã®ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›

```go
file, err := os.OpenFile("test.log", os.O_CREATE|os.O_APPEND|os.O_WRONLY, 0644)
if err != nil {
    log.Fatal(err)
}

defer file.Close()

log.SetOutput(file)
log.Print("This is test")
```


# ãƒ­ã‚°ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

- [Logrus](https://github.com/sirupsen/logrus)
- [zerolog](https://github.com/rs/zerolog)
- [zap](https://github.com/uber-go/zap)
- [Apex](https://github.com/apex/log)

## ä½¿ç”¨ä¾‹

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
go get -u github.com/rs/zerolog/log
```

### ä½¿ç”¨

```go
package main

import (
    "github.com/rs/zerolog"
    "github.com/rs/zerolog/log"
)

func main() {
    zerolog.TimeFieldFormat = zerolog.TimeFormatUnix

    log.Debug().
        Int("AccountId", 157).
        Msg("Got account")

    log.Debug().
        Str("Name", "Ryo").
        Send()
}
```

```
{"level":"debug","EmployeeID":157,"time":1627344471,"message":"Got account"}
{"level":"debug","Name":"Ryo","time":1627344471}
```